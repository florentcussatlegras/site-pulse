{% extends 'base.html.twig' %}

{% block title %}Rapport d‚Äôaudit{% endblock %}

{% block body %}
<section class="min-h-screen bg-content px-4 py-10 w-full">

    {# Header #}
    <div class="max-w-6xl mx-auto flex flex-col sm:flex-row items-center justify-between mb-8">
        <h1 class="text-2xl font-bold mb-4 sm:mb-0 text-primary">
            Rapport d‚Äôaudit
        </h1>

        <a href="{{ path('app_home') }}"
           class="inline-flex items-center px-4 py-2 border rounded-lg
                  text-button-secondary bg-button-secondary border-color-button-secondary
                  hover:opacity-80 transition">
            ‚Üê Nouvel audit
        </a>
    </div>

    {# R√©sum√© global #}
    <div class="max-w-6xl mx-auto text-center space-y-2 mb-8 bg-card-color rounded-2xl p-6">
        <h2 class="text-xl font-semibold text-primary">R√©sum√©</h2>
        <p class="text-neutral-600">
            {% if audit.recommendations is not empty %}
                Des optimisations sont recommand√©es pour am√©liorer les performances de votre site.
            {% else %}
                Votre site est bien optimis√© selon nos crit√®res actuels.
            {% endif %}
        </p>
    </div>

    {# Scores #}
    <div class="max-w-6xl mx-auto mb-8 p-6 bg-white rounded-2xl shadow">
        <h2 class="text-lg font-bold mb-6 text-center text-primary">
            Scores par cat√©gorie
        </h2>

        <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4">
            {% include 'pages/audit/_score_card.html.twig' with { label: 'Performance', score: audit.performance } %}
            {% include 'pages/audit/_score_card.html.twig' with { label: 'SEO', score: audit.seo } %}
            {% include 'pages/audit/_score_card.html.twig' with { label: 'Accessibilit√©', score: audit.accessibility } %}
            {% include 'pages/audit/_score_card.html.twig' with { label: 'Bonnes pratiques', score: audit.bestPractices } %}
        </div>
    </div>

    {# Recommandations #}
    <div class="max-w-6xl mx-auto space-y-4 mb-8 p-6 bg-white rounded-2xl shadow">
        <h2 class="text-lg font-bold text-primary">
            Recommandations prioritaires
        </h2>

        <ul class="space-y-2 text-neutral-700">
            {% if audit.recommendations is empty %}
                <li class="text-green-600 font-medium">
                    üéâ Aucune recommandation critique d√©tect√©e
                </li>
            {% else %}
                {% for rec in audit.recommendations %}
                    <li>‚Ä¢ {{ rec }}</li>
                {% endfor %}
            {% endif %}
        </ul>
    </div>

    {# CTA final #}
    <div class="flex justify-center mb-10">
        <a href="{{ path('app_home') }}"
           class="px-6 py-3 bg-sky-600 text-white rounded-lg
                  hover:bg-sky-700 transition font-semibold">
            Relancer un audit
        </a>
    </div>

</section>
{% endblock %}
